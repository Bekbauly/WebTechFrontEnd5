<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Assignment 5: Forms and Validation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input, .form-group textarea { width: 100%; max-width: 500px; padding: 8px; margin-bottom: 5px; }
        .form-group button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        .form-group button:hover { background-color: #0056b3; }
        .form-section { margin-bottom: 60px; }
        .radio-group.invalid-feedback { margin-top: 0.25rem; display: none; }
        .radio-group.show-feedback { display: block; color: #dc3545; font-size: .875em; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <!-- Part 1: Basic HTML Forms -->
        <div class="form-section">
            <h2>Part 1: Basic HTML Forms</h2>
            <form id="simpleForm">
                <div class="form-group">
                    <label for="simpleName">Name:</label>
                    <input type="text" id="simpleName" name="name" required maxlength="50" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="simpleEmail">Email:</label>
                    <input type="email" id="simpleEmail" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="simpleMessage">Message:</label>
                    <textarea id="simpleMessage" name="message" rows="5" required maxlength="500" placeholder="Your message"></textarea>
                </div>
                <button type="submit">Submit</button>
            </form>
        </div>

        <!-- Part 2: Bootstrap Forms -->
        <div class="form-section">
            <h2>Part 2: Bootstrap Forms</h2>
            <form id="bootstrapForm" novalidate>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="bootstrapName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="bootstrapName" name="name" placeholder="Enter your name" required maxlength="50">
                        <div class="form-text">Please enter your full name (max 50 characters).</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Name is required.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="bootstrapEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="bootstrapEmail" name="email" placeholder="Enter your email" required>
                        <div class="form-text">We'll never share your email with anyone.</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Please enter a valid email address.</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="bootstrapMessage" class="form-label">Message</label>
                    <textarea class="form-control" id="bootstrapMessage" name="message" rows="5" placeholder="Your message" required maxlength="500"></textarea>
                    <div class="form-text">Enter your message (max 500 characters).</div>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Message is required.</div>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>

        <!-- Part 3: Advanced Form Project -->
        <div class="form-section">
            <h2>Part 3: Advanced Form Project</h2>
            <form id="registrationForm" novalidate>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="firstName" name="firstName" placeholder="Enter first name" required maxlength="50">
                        <div class="form-text">Max 50 characters.</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">First name is required.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Enter last name" required maxlength="50">
                        <div class="form-text">Max 50 characters.</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Last name is required.</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="regEmail" class="form-label">Email</label>
                    <input type="email" class="form-control" id="regEmail" name="email" placeholder="Enter email" required>
                    <div class="form-text">We'll never share your email.</div>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Please enter a valid email.</div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required minlength="8">
                        <div class="form-text">Minimum 8 characters.</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Password must be at least 8 characters.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm password" required minlength="8">
                        <div class="form-text">Must match password.</div>
                        <div class="valid-feedback">Looks good!</div>
                        <div class="invalid-feedback">Passwords must match.</div>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Gender</label>
                    <div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="male" required>
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="female">
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="other" value="other">
                            <label class="form-check-label" for="other">Other</label>
                        </div>
                    </div>
                    <div id="genderFeedback" class="radio-group invalid-feedback">Please select a gender.</div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Hobbies</label>
                    <div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="reading" name="hobbies[]" value="reading">
                            <label class="form-check-label" for="reading">Reading</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="gaming" name="hobbies[]" value="gaming">
                            <label class="form-check-label" for="gaming">Gaming</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="sports" name="hobbies[]" value="sports">
                            <label class="form-check-label" for="sports">Sports</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="music" name="hobbies[]" value="music">
                            <label class="form-check-label" for="music">Music</label>
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="country" class="form-label">Country</label>
                    <select class="form-select" id="country" name="country" required>
                        <option value="" selected disabled>Select your country</option>
                        <option value="Kazakhstan">Kazakhstan</option>
                        <option value="USA">USA</option>
                        <option value="Canada">Canada</option>
                        <option value="Germany">Germany</option>
                        <option value="Japan">Japan</option>
                    </select>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Please select a country.</div>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    (function () {
        'use strict';
        const bootstrapForm = document.getElementById('bootstrapForm');
        bootstrapForm && bootstrapForm.addEventListener('submit', function (event) {
            event.preventDefault();
            event.stopPropagation();
            bootstrapForm.querySelectorAll('.form-control').forEach(input => {
                input.classList.toggle('is-valid', input.validity.valid);
                input.classList.toggle('is-invalid', !input.validity.valid);
            });
            bootstrapForm.classList.add('was-validated');
        });

        const registrationForm = document.getElementById('registrationForm');
        const confirmPassword = document.getElementById('confirmPassword');
        const password = document.getElementById('password');
        const genderFeedback = document.getElementById('genderFeedback');

        const checkPasswordMatch = () => {
            const match = password.value === confirmPassword.value;
            confirmPassword.setCustomValidity(match ? '' : 'Passwords must match');
            confirmPassword.classList.toggle('is-valid', confirmPassword.validity.valid && confirmPassword.value.length >= 8);
            confirmPassword.classList.toggle('is-invalid', !confirmPassword.validity.valid);
        };

        password.addEventListener('input', checkPasswordMatch);
        confirmPassword.addEventListener('input', checkPasswordMatch);

        registrationForm.addEventListener('submit', function (event) {
            event.preventDefault();
            event.stopPropagation();
            Array.from(registrationForm.querySelectorAll('.form-control, .form-select'))
                .filter(el => el.id !== 'confirmPassword')
                .forEach(input => {
                    input.classList.toggle('is-valid', input.validity.valid);
                    input.classList.toggle('is-invalid', !input.validity.valid);
                });
            checkPasswordMatch();
            const gender = document.querySelector('input[name="gender"]:checked');
            const genderPresent = !!gender;
            const genderInputs = document.querySelectorAll('input[name="gender"]');
            genderInputs.forEach(input => {
                input.classList.toggle('is-valid', genderPresent);
                input.classList.toggle('is-invalid', !genderPresent);
            });
            genderFeedback.classList.toggle('show-feedback', !genderPresent);
            registrationForm.classList.add('was-validated');
            const formValid = registrationForm.checkValidity() && genderPresent;
            formValid && alert('Form is valid and ready to be submitted.');
            formValid && registrationForm.submit && registrationForm.submit();
            formValid || (() => {
                const firstInvalid = registrationForm.querySelector('.is-invalid');
                firstInvalid && firstInvalid.focus();
            })();
        });

        registrationForm.addEventListener('reset', function () {
            setTimeout(() => {
                registrationForm.querySelectorAll('.is-valid, .is-invalid').forEach(el => el.classList.remove('is-valid', 'is-invalid'));
                registrationForm.classList.remove('was-validated');
                genderFeedback.classList.remove('show-feedback');
                confirmPassword.setCustomValidity('');
            }, 0);
        });
    })();
    </script>
</body>
</html>
